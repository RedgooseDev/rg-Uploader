{"version":3,"sources":["changeQueueStyle.plugin.js","dnd.plugin.js","preview.plugin.js","sizeinfo.plugin.js","thumbnail.plugin.js"],"names":["RG_ChangeQueueStyle","this","name","buttonsParams","title","iconName","default","$nav","$buttons","self","app","createButtons","$","each","k","o","$el","initButtonsEvent","append","children","on","e","hasClass","queue","changeStyle","data","changeActiveButton","removeClass","filter","addClass","init","parent","$container","style","eventListener","type","value","RG_DragAndDrop","areaElements","externalAreaElements","fileDragAndDrop","area","window","File","FileList","FileReader","Blob","length","defer","Deferred","over","overHandler","stopPropagation","preventDefault","currentTarget","dataTransfer","dropEffect","dropHandler","files","notify","i","addEventListener","promise","done","uploader","uploading","alert","lang","play","$uploadElement","push","$queue","get","dnd","progress","RG_Preview","$preview","classNameNotImage","width","createPreview","str","find","prepend","updatePreview","src","$figure","css","attr","visiblePreview","sw","parseInt","options","height","id","$selectElement","n","findItem","file","items","split","fullSrc","RG_Sizeinfo","size","current","total","$body","wrapSelector","$current","$total","create","plugin","error","limitSizeTotal","update","text","util","bytesToSize","getSize","RG_Thumbnail","loadExternalFiles","loadedCroppie","head","document","getElementsByTagName","cssEl","createElement","scriptEl","rel","href","url_croppieCSS","url_croppieJS","appendChild","createContainer","con","wrap","bg","figure","meta","btn_done","btn_close","initEvents","close","RESIZE_EVENT","resize","actMobile","pass","isMobile","marginLeft","marginTop","left","top","croppie","rebuildCroppie","actDesktop","$win","resizeInterval","clearTimeout","setTimeout","isResize","save","destroyCroppie","boundary","mobileSize","Croppie","bind","url","points","setZoom","zoom","destroy","result","output","then","res","uploadScript","post","image","getUniqueNumber","JSON","parse","state","response","message","doneCallback","format","assignOption","open","obj","openCallback","closeCallback","extend","prototype","quality","viewport"],"mappings":"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","file":"plugin.pkgd.js","sourcesContent":["function RG_ChangeQueueStyle() {\n\n\tthis.name = 'Change Queue Style';\n\tthis.buttonsParams = [\n\t\t{ name : 'list', title : 'list style', iconName : 'menu', default : true },\n\t\t{ name : 'web', title : 'web style', iconName : 'view_list', default : false },\n\t\t{ name : 'album', title : 'album style', iconName : 'view_module', default : false }\n\t];\n\tthis.$nav = null;\n\tthis.$buttons = null;\n\n\tvar self = this;\n\tvar app = null;\n\n\n\t/**\n\t * create buttons\n\t */\n\tvar createButtons = function()\n\t{\n\t\t$.each(self.buttonsParams, function(k, o){\n\t\t\tvar $el = $('<button type=\"button\" class=\"style-' + o.name + '\" title=\"' + o.title + '\" data-style=\"' + o.name + '\">' +\n\t\t\t\t'<i class=\"material-icons\">' + o.iconName + '</i>' +\n\t\t\t\t'</button>');\n\t\t\tinitButtonsEvent($el);\n\t\t\tself.$nav.append($el);\n\t\t});\n\t\tself.$buttons = self.$nav.children('button');\n\t};\n\n\t/**\n\t * init buttons event\n\t *\n\t * @Param {Object} $el\n\t */\n\tvar initButtonsEvent = function($el)\n\t{\n\t\t$el.on('click', function(e){\n\t\t\tif ($(this).hasClass('on')) return false;\n\t\t\tapp.queue.changeStyle($(this).data('style'));\n\t\t});\n\t};\n\n\t/**\n\t * change active button\n\t */\n\tvar changeActiveButton = function(name)\n\t{\n\t\t// change style\n\t\tself.$buttons.removeClass('on').filter('.style-' + name).addClass('on');\n\t};\n\n\n\t/**\n\t * init\n\t *\n\t * @Param {Object} parent\n\t */\n\tthis.init = function(parent)\n\t{\n\t\tapp = parent;\n\n\t\t// append comp\n\t\tself.$nav = $('<nav data-element=\"selectQueueStyle\"></nav>');\n\t\tapp.$container.children('header').append(self.$nav);\n\n\t\t// create buttons\n\t\tcreateButtons();\n\n\t\t// set active button\n\t\tchangeActiveButton(app.queue.style);\n\n\t};\n\n\t/**\n\t * event listener\n\t *\n\t * @Param {String} type\n\t * @Param {*} value\n\t */\n\tthis.eventListener = function(type, value)\n\t{\n\t\tswitch (type) {\n\t\t\t// change style\n\t\t\tcase 'queue.changeStyle':\n\t\t\t\tchangeActiveButton(value.style);\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","function RG_DragAndDrop() {\n\n\tthis.name = 'Drag And Drop';\n\tthis.areaElements = [];\n\n\tvar self = this;\n\tvar app = null;\n\tvar externalAreaElements = $('.rg-external-dropzone');\n\n\n\t/**\n\t * init file drag and drop event\n\t *\n\t * @Param {Array} area\n\t * @Return {Object}\n\t */\n\tvar fileDragAndDrop = function(area)\n\t{\n\t\tif (!window.File || !window.FileList || !window.FileReader || !window.Blob) return false;\n\t\tif (!area.length) return false;\n\n\t\tvar defer = $.Deferred();\n\t\tvar over = false;\n\n\t\t/**\n\t\t * dragover handler\n\t\t *\n\t\t * @Param {Object} e\n\t\t */\n\t\tvar overHandler = function(e)\n\t\t{\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\tif (e.type == 'dragover')\n\t\t\t{\n\t\t\t\tif (over) return false;\n\t\t\t\tover = true;\n\t\t\t\t$(e.currentTarget).addClass('drop-mode');\n\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tover = false;\n\t\t\t\t$(e.currentTarget).removeClass('drop-mode');\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\t/**\n\t\t * drop handler\n\t\t *\n\t\t * @Param {Object} e\n\t\t */\n\t\tvar dropHandler = function(e)\n\t\t{\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\toverHandler(e);\n\n\t\t\tvar files = (e.dataTransfer) ? e.dataTransfer.files : null;\n\t\t\tif (files && files.length)\n\t\t\t{\n\t\t\t\tdefer.notify(files);\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\t// set events\n\t\tfor (var i=0; i<area.length; i++)\n\t\t{\n\t\t\tarea[i].addEventListener('dragover', overHandler, false);\n\t\t\tarea[i].addEventListener('dragleave', overHandler, false);\n\t\t\tarea[i].addEventListener('drop', dropHandler, false);\n\t\t}\n\n\t\treturn defer.promise();\n\t};\n\n\t/**\n\t * done event\n\t *\n\t * @Param {FileList} files\n\t */\n\tvar done = function(files)\n\t{\n\t\tif (app.uploader.uploading)\n\t\t{\n\t\t\talert(app.lang('error_add_upload'));\n\t\t\treturn false;\n\t\t}\n\n\t\t// play upload\n\t\tapp.uploader.play(app.uploader.$uploadElement, (files || []));\n\t};\n\n\n\t/**\n\t * init\n\t *\n\t * @Param {Object} parent\n\t */\n\tthis.init = function(parent)\n\t{\n\t\tapp = parent;\n\n\t\t// push area elements\n\t\tthis.areaElements.push(app.queue.$queue.parent().get(0));\n\t\texternalAreaElements.each(function(){\n\t\t\tself.areaElements.push(this);\n\t\t});\n\n\t\t// init event\n\t\tif (this.areaElements.length)\n\t\t{\n\t\t\tvar dnd = fileDragAndDrop(this.areaElements);\n\t\t\tif (dnd && dnd.progress)\n\t\t\t{\n\t\t\t\tdnd.progress(done);\n\t\t\t}\n\t\t}\n\t}\n}","function RG_Preview() {\n\n\tthis.name = 'Preview';\n\tthis.$preview = null;\n\n\tvar self = this;\n\tvar app = null;\n\tvar classNameNotImage = 'not-image';\n\tvar width = 150;\n\n\n\t/**\n\t * create preview\n\t */\n\tvar createPreview = function()\n\t{\n\t\tvar str = '<div class=\"col preview\"><figure></figure></div>';\n\t\tself.$preview = $(str);\n\n\t\t// set width\n\t\tself.$preview.width(width);\n\n\t\t// append element\n\t\tapp.$container.find('[data-comp=queue]').prepend(self.$preview);\n\n\t\t// update\n\t\tupdatePreview();\n\t};\n\n\t/**\n\t * update preview\n\t *\n\t * @Param {String} src\n\t */\n\tvar updatePreview = function(src)\n\t{\n\t\tvar $figure = self.$preview.children('figure');\n\t\tif (src)\n\t\t{\n\t\t\t$figure\n\t\t\t\t.css('backgroundImage', 'url(\\'' + src + '\\')')\n\t\t\t\t.removeClass(classNameNotImage);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$figure.attr('style', '').addClass(classNameNotImage);\n\t\t}\n\t};\n\n\t/**\n\t * visible preview\n\t *\n\t * @Param {Boolean} src\n\t */\n\tvar visiblePreview = function(sw)\n\t{\n\t\tif (sw)\n\t\t{\n\t\t\tself.$preview.removeClass('hide');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tself.$preview.addClass('hide');\n\t\t}\n\t};\n\n\n\t/**\n\t * init\n\t *\n\t * @Param {Object} parent\n\t */\n\tthis.init = function(parent)\n\t{\n\t\tapp = parent;\n\t\twidth = parseInt(app.options.queue.height);\n\n\t\tcreatePreview();\n\t};\n\n\t/**\n\t * event listener\n\t *\n\t * @Param {String} type\n\t * @Param {*} value\n\t */\n\tthis.eventListener = function(type, value)\n\t{\n\t\tswitch(type) {\n\t\t\t// select queue\n\t\t\tcase 'queue.selectQueue':\n\t\t\t\tvar id = value.$selectElement.data('id');\n\t\t\t\tvar n = app.queue.findItem(id);\n\t\t\t\tvar file = app.queue.items.files[n];\n\t\t\t\tvar src = (value.$selectElement.hasClass('selected') && (file.type.split('/')[0] == 'image')) ? file.fullSrc : null;\n\t\t\t\tupdatePreview(src);\n\t\t\t\tbreak;\n\n\t\t\t// change queue style\n\t\t\tcase 'queue.changeStyle':\n\t\t\t\tvisiblePreview( (value.style == 'list') );\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","function RG_Sizeinfo() {\n\n\tthis.name = 'Size info';\n\tthis.size = { current: 0, total: 0 };\n\n\tvar self = this;\n\tvar app = null;\n\tvar $body = null;\n\tvar wrapSelector = '.size-info';\n\tvar $current = null;\n\tvar $total = null;\n\n\n\t/**\n\t * create element\n\t *\n\t */\n\tvar create = function()\n\t{\n\t\tvar str = '<p>Size : <em data-text=\"currentSize\"></em>/<em data-text=\"totalSize\"></em></p>';\n\t\t$body.append(str);\n\t\t$current = $body.find('[data-text=currentSize]');\n\t\t$total = $body.find('[data-text=totalSize]');\n\t};\n\n\n\t/**\n\t * init\n\t *\n\t * @Param {Object} parent\n\t */\n\tthis.init = function(parent)\n\t{\n\t\tapp = parent;\n\t\t$body = parent.$container.find(wrapSelector);\n\n\t\t// not found $body element\n\t\tif (!$body.length)\n\t\t{\n\t\t\tapp.plugin.error(name);\n\t\t}\n\n\t\t// create elements\n\t\tcreate();\n\n\t\t// set size\n\t\tthis.size.total = app.options.limitSizeTotal;\n\n\t\t// update size\n\t\tthis.update();\n\t};\n\n\t/**\n\t * update\n\t */\n\tthis.update = function()\n\t{\n\t\t$current.text(app.util.bytesToSize(this.size.current));\n\t\t$total.text(app.util.bytesToSize(this.size.total));\n\t};\n\n\t/**\n\t * event listener\n\t *\n\t * @Param {String} type\n\t * @Param {*} value\n\t */\n\tthis.eventListener = function(type, value)\n\t{\n\t\tswitch(type) {\n\t\t\tcase 'queue.uploadComplete':\n\t\t\t\tself.size.current += value.file.size;\n\t\t\t\tself.update(app.queue.getSize());\n\t\t\t\tbreak;\n\n\t\t\tcase 'queue.removeQueue':\n\t\t\t\tself.size.current = app.queue.getSize();\n\t\t\t\tself.update();\n\t\t\t\tbreak;\n\t\t}\n\t}\n}","// croppie : http://foliotek.github.io/Croppie/\n\nfunction RG_Thumbnail(options) {\n\n\tthis.name = 'Make thumbnail';\n\n\tvar self = this;\n\tvar app = null;\n\tvar RESIZE_EVENT = 'resize.rgUploader';\n\tvar isMobile = false;\n\tvar resizeInterval = null;\n\n\tthis.file = null;\n\tthis.croppie = null;\n\tthis.$el = {\n\t\tcon : null,\n\t\twrap : null,\n\t\tbg : null,\n\t\tfigure : null,\n\t\tmeta : null,\n\t\tbtn_close : null,\n\t\tbtn_done : null\n\t};\n\n\n\t/**\n\t * load external vendor files\n\t */\n\tfunction loadExternalFiles()\n\t{\n\t\tif (window.loadedCroppie) return false;\n\n\t\tvar head = document.getElementsByTagName('head')[0];\n\t\tvar cssEl = document.createElement('link');\n\t\tvar scriptEl = document.createElement('script');\n\n\t\tcssEl.rel = 'stylesheet';\n\t\tcssEl.href = self.options.url_croppieCSS;\n\t\tscriptEl.src = self.options.url_croppieJS;\n\n\t\thead.appendChild(cssEl);\n\t\thead.appendChild(scriptEl);\n\n\t\twindow.loadedCroppie = true;\n\t}\n\n\t/**\n\t * create container\n\t */\n\tfunction createContainer()\n\t{\n\t\t// set elements\n\t\tself.$el.con = $('<div class=\"rg-plugin-thumbnail\">' +\n\t\t\t'<span class=\"bg\"></span>' +\n\t\t\t'<div class=\"wrap\">' +\n\t\t\t'<div class=\"img-wrap\"><figure></figure></div>' +\n\t\t\t'<div class=\"body\">' +\n\t\t\t'<div class=\"meta\"><p>message</p></div>' +\n\t\t\t'<nav>' +\n\t\t\t'<button type=\"button\" class=\"btn-done\"><i class=\"material-icons\">done</i></button>' +\n\t\t\t'<button type=\"button\" class=\"btn-close\"><i class=\"material-icons\">close</i></button>' +\n\t\t\t'</nav>' +\n\t\t\t'</div>' +\n\t\t\t'</div>' +\n\t\t\t'</div>');\n\t\tself.$el.wrap = self.$el.con.children('.wrap');\n\t\tself.$el.bg = self.$el.con.children('.bg');\n\t\tself.$el.figure = self.$el.con.find('.img-wrap figure');\n\t\tself.$el.meta = self.$el.con.find('.meta > p');\n\t\tself.$el.btn_done = self.$el.con.find('.btn-done');\n\t\tself.$el.btn_close = self.$el.con.find('.btn-close');\n\n\t\t// insert element\n\t\t$('body').append(self.$el.con);\n\t}\n\n\t/**\n\t * init events\n\t */\n\tfunction initEvents()\n\t{\n\t\t// close in background\n\t\tself.$el.bg.on('click', function(){\n\t\t\tself.close();\n\t\t});\n\n\t\t// close in close button\n\t\tself.$el.btn_close.on('click', function(){\n\t\t\tself.close();\n\t\t});\n\n\t\t// done\n\t\tself.$el.btn_done.on('click', done);\n\n\t\t// init resize event\n\t\t$(window).on(RESIZE_EVENT, resize);\n\t}\n\n\t/**\n\t * change mobile\n\t */\n\tfunction actMobile(pass)\n\t{\n\t\tif (!pass && isMobile) return false;\n\n\t\t// set isMobile\n\t\tisMobile = true;\n\n\t\t// change window size\n\t\tself.$el.wrap\n\t\t\t.width('100%').height('100%')\n\t\t\t.css({ marginLeft : 0, marginTop : 0, left: 0, top: 0 });\n\n\t\t// rebuild croppie\n\t\tif (self.croppie)\n\t\t{\n\t\t\trebuildCroppie(true);\n\t\t}\n\t}\n\n\t/**\n\t * change desktop\n\t */\n\tfunction actDesktop(pass)\n\t{\n\t\tif (!pass && !isMobile) return false;\n\n\t\t// set isMobile\n\t\tisMobile = false;\n\n\t\t// change window size\n\t\tself.$el.wrap\n\t\t\t.width(self.options.width).height(self.options.height)\n\t\t\t.css({\n\t\t\t\tmarginLeft : (0 - self.options.width * 0.5) + 'px',\n\t\t\t\tmarginTop : (0 - self.options.height * 0.5) + 'px',\n\t\t\t\tleft: '50%',\n\t\t\t\ttop: '50%'\n\t\t\t});\n\n\t\t// rebuild croppie\n\t\tif (self.croppie)\n\t\t{\n\t\t\trebuildCroppie(true);\n\t\t}\n\t}\n\n\t/**\n\t * resize event\n\t *\n\t * @Param {Object} e\n\t */\n\tfunction resize(e)\n\t{\n\t\tvar $win = $(window);\n\n\t\tif (!self.croppie)\n\t\t{\n\t\t\tclearTimeout(resizeInterval);\n\t\t\treturn false;\n\t\t}\n\n\t\tif (resizeInterval)\n\t\t{\n\t\t\tclearTimeout(resizeInterval);\n\t\t}\n\n\t\tresizeInterval = setTimeout(function(){\n\t\t\t// 계속 모바일 사이즈상태일때 실행\n\t\t\tif (isMobile && ($win.width() < 640))\n\t\t\t{\n\t\t\t\tactMobile(true);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ($win.width() < 640)\n\t\t\t{\n\t\t\t\tactMobile(true);\n\t\t\t}\n\t\t\telse if ($win.width() > 640)\n\t\t\t{\n\t\t\t\tactDesktop(true);\n\t\t\t}\n\t\t}, 300);\n\t}\n\n\t/**\n\t * rebuild croppie\n\t *\n\t * @Param {Boolean} isResize\n\t */\n\tfunction rebuildCroppie(isResize)\n\t{\n\t\t// save option\n\t\tvar save = (isResize) ? self.croppie.get() : {};\n\n\t\t// destroy croppie\n\t\tdestroyCroppie();\n\n\t\t// build croppie\n\t\tself.options.croppie.boundary = {\n\t\t\twidth : (self.options.mobileSize > $(window).width()) ? $(window).width() : self.options.width,\n\t\t\theight : ((self.options.mobileSize > $(window).width()) ? $(window).height() : self.options.height)-60\n\t\t};\n\t\tself.croppie = new Croppie(self.$el.figure.get(0), self.options.croppie);\n\n\t\t// bind croppie\n\t\tif (isResize)\n\t\t{\n\t\t\tself.croppie.bind({\n\t\t\t\turl : self.file.fullSrc,\n\t\t\t\tpoints : save.points\n\t\t\t});\n\t\t\tself.croppie.setZoom(save.zoom);\n\t\t}\n\t}\n\n\t/**\n\t * destroy croppie\n\t */\n\tfunction destroyCroppie()\n\t{\n\t\tif (self.croppie)\n\t\t{\n\t\t\tself.croppie.destroy();\n\t\t\tself.croppie = null;\n\t\t}\n\t}\n\n\t/**\n\t * done event\n\t *\n\t * @Param {Object} e\n\t */\n\tfunction done(e)\n\t{\n\t\t// result\n\t\tself.croppie.result(self.options.output).then(function(res){\n\t\t\tif (self.options.uploadScript)\n\t\t\t{\n\t\t\t\t$.post(\n\t\t\t\t\tself.options.uploadScript,\n\t\t\t\t\t{\n\t\t\t\t\t\tname : self.file.name,\n\t\t\t\t\t\timage : res,\n\t\t\t\t\t\tid : app.util.getUniqueNumber()\n\t\t\t\t\t},\n\t\t\t\t\tfunction(res){\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tres = JSON.parse(res);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\talert('parse error');\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (res.state == 'error')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\talert(res.response.message);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (self.options.doneCallback)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tself.options.doneCallback(res.response);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (self.options.doneCallback)\n\t\t\t\t{\n\t\t\t\t\tself.options.doneCallback({\n\t\t\t\t\t\tid : app.util.getUniqueNumber(),\n\t\t\t\t\t\tname : 'thumb-' + self.file.name,\n\t\t\t\t\t\tsrc : res,\n\t\t\t\t\t\ttype : 'image/' + self.options.output.format,\n\t\t\t\t\t\tsize : 0\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// close\n\t\t\tself.close();\n\t\t});\n\t}\n\n\n\t/**\n\t * init\n\t *\n\t * @Param {Object} parent\n\t */\n\tthis.init = function(parent)\n\t{\n\t\tapp = parent;\n\n\t\t// merge options\n\t\tthis.assignOption(options);\n\n\t\t// load files\n\t\tloadExternalFiles();\n\n\t\t// create container\n\t\tcreateContainer();\n\n\t\t// init events\n\t\tinitEvents();\n\t};\n\n\t/**\n\t * open window\n\t *\n\t * @Param {Object} obj\n\t */\n\tthis.open = function(obj)\n\t{\n\t\t// show window\n\t\tthis.$el.con.addClass('show');\n\t\t$('html').addClass('rg-popup');\n\n\t\t// set file value\n\t\tthis.file = obj;\n\n\t\t// act pc & mobile\n\t\tif ($(window).width() < this.options.mobileSize)\n\t\t{\n\t\t\tactMobile(true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tactDesktop(true);\n\t\t}\n\n\t\t// rebuild croppie\n\t\trebuildCroppie();\n\t\t// bind image\n\t\tthis.croppie.bind({ url : this.file.fullSrc });\n\n\t\t// input state\n\t\tthis.$el.meta.text('output size: ' + this.options.output.size.width + '*' + this.options.output.size.height);\n\n\t\t// callback open window\n\t\tif (this.options.openCallback)\n\t\t{\n\t\t\tthis.options.openCallback();\n\t\t}\n\t};\n\n\t/**\n\t * close window\n\t */\n\tthis.close = function()\n\t{\n\t\tdestroyCroppie();\n\t\tthis.file = null;\n\t\tthis.$el.con.removeClass('show');\n\t\t$('html').removeClass('rg-popup');\n\n\t\t// callback close window\n\t\tif (this.options.closeCallback)\n\t\t{\n\t\t\tthis.options.closeCallback();\n\t\t}\n\t};\n\n\t/**\n\t * assignOption\n\t *\n\t * @Param {Object} obj\n\t */\n\tthis.assignOption = function(obj)\n\t{\n\t\tthis.options = $.extend({}, this.options, obj);\n\t}\n}\n\nRG_Thumbnail.prototype.options = {\n\twidth : 640,\n\theight : 480,\n\tmobileSize : 640,\n\turl_croppieCSS : '../vendor/croppie/croppie.css',\n\turl_croppieJS : '../vendor/croppie/croppie.min.js',\n\tuploadScript : '',\n\toutput : {\n\t\ttype : 'canvas',\n\t\tquality : .3,\n\t\tformat : 'jpeg',\n\t\tsize : { width : 150, height : 150 }\n\t},\n\tcroppie : {\n\t\tboundary : { width: 640, height: 480-60 },\n\t\tviewport : { width: 150, height: 150, type: 'square' }\n\t},\n\tdoneCallback : null,\n\topenCallback : null,\n\tcloseCallback : null\n};"],"sourceRoot":"/source/"}