{"version":3,"sources":["changeQueueStyle.plugin.js","dnd.plugin.js","preview.plugin.js","sizeinfo.plugin.js","thumbnail.plugin.js"],"names":["RGUploader","prototype","plugins","changeQueueStyle","name","app","$nav","$buttons","buttonsParams","title","iconName","default","createButtons","$","each","k","o","$el","initButtonsEvent","append","children","on","e","this","hasClass","queue","changeStyle","data","changeActiveButton","removeClass","filter","addClass","init","parent","$container","style","eventListener","type","value","dnd","areaElements","externalAreaElements","fileDragAndDrop","area","window","File","FileList","FileReader","Blob","length","defer","Deferred","over","overHandler","stopPropagation","preventDefault","currentTarget","dataTransfer","dropEffect","dropHandler","files","notify","i","addEventListener","promise","done","uploader","uploading","alert","lang","play","push","$queue","get","progress","preview","$preview","classNameNotImage","width","createPreview","str","find","prepend","updatePreview","src","$figure","css","attr","visiblePreview","sw","parseInt","options","height","id","$selectElement","n","findItem","file","items","split","sizeinfo","$body","wrapSelector","$current","$total","size","current","total","update","text","util","bytesToSize","create","plugin","error","limitSizeTotal","getSize","thumbnail","log","open"],"mappings":"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","file":"plugin.pkgd.js","sourcesContent":[";(function() {\n\tRGUploader.prototype.plugins.changeQueueStyle = function ()\n\t{\n\t\tvar name = 'Change queue style';\n\t\tvar app = null;\n\t\tvar $nav = null;\n\t\tvar $buttons = null;\n\t\tvar buttonsParams = [\n\t\t\t{ name : 'list', title : 'list style', iconName : 'menu', default : true },\n\t\t\t{ name : 'web', title : 'web style', iconName : 'view_list', default : false },\n\t\t\t{ name : 'album', title : 'album style', iconName : 'view_module', default : false }\n\t\t];\n\n\n\t\t/**\n\t\t * create buttons\n\t\t */\n\t\tvar createButtons = function()\n\t\t{\n\t\t\t$.each(buttonsParams, function(k, o){\n\t\t\t\tvar $el = $('<button type=\"button\" class=\"style-' + o.name + '\" title=\"' + o.title + '\" data-style=\"' + o.name + '\">' +\n\t\t\t\t\t'<i class=\"material-icons\">' + o.iconName + '</i>' +\n\t\t\t\t\t'</button>');\n\t\t\t\tinitButtonsEvent($el);\n\t\t\t\t$nav.append($el);\n\t\t\t});\n\t\t\t$buttons = $nav.children('button');\n\t\t};\n\n\t\t/**\n\t\t * init buttons event\n\t\t *\n\t\t * @Param {Object} $el\n\t\t */\n\t\tvar initButtonsEvent = function($el)\n\t\t{\n\t\t\t$el.on('click', function(e){\n\t\t\t\tif ($(this).hasClass('on')) return false;\n\t\t\t\tapp.queue.changeStyle($(this).data('style'));\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * change active button\n\t\t */\n\t\tvar changeActiveButton = function(name)\n\t\t{\n\t\t\t// change style\n\t\t\t$buttons.removeClass('on').filter('.style-' + name).addClass('on');\n\t\t};\n\n\n\t\t// return\n\t\treturn {\n\t\t\tname : name,\n\t\t\tinit : function(parent)\n\t\t\t{\n\t\t\t\tapp = parent;\n\n\t\t\t\t// append comp\n\t\t\t\t$nav = $('<nav data-element=\"selectQueueStyle\"></nav>');\n\t\t\t\tapp.$container.children('header').append($nav);\n\n\t\t\t\t// create buttons\n\t\t\t\tcreateButtons();\n\n\t\t\t\t// set active button\n\t\t\t\tchangeActiveButton(app.queue.style);\n\n\t\t\t},\n\t\t\teventListener : function(type, value)\n\t\t\t{\n\t\t\t\tswitch (type) {\n\t\t\t\t\t// change style\n\t\t\t\t\tcase 'queue.changeStyle':\n\t\t\t\t\t\tchangeActiveButton(value.style);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})();",";(function() {\n\tRGUploader.prototype.plugins.dnd = function ()\n\t{\n\t\tvar name = 'Drag and Drop upload';\n\t\tvar app = null;\n\t\tvar areaElements = [];\n\t\tvar externalAreaElements = $('.rg-external-dropzone');\n\n\n\t\t/**\n\t\t * init file drag and drop event\n\t\t *\n\t\t * @Param {Array} area\n\t\t * @Return {Object}\n\t\t */\n\t\tvar fileDragAndDrop = function(area)\n\t\t{\n\t\t\tif (!window.File || !window.FileList || !window.FileReader || !window.Blob) return false;\n\t\t\tif (!area.length) return false;\n\n\t\t\tvar defer = $.Deferred();\n\t\t\tvar over = false;\n\n\t\t\t/**\n\t\t\t * dragover handler\n\t\t\t *\n\t\t\t * @Param {Object} e\n\t\t\t */\n\t\t\tvar overHandler = function(e)\n\t\t\t{\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif (e.type == 'dragover')\n\t\t\t\t{\n\t\t\t\t\tif (over) return false;\n\t\t\t\t\tover = true;\n\t\t\t\t\t$(e.currentTarget).addClass('drop-mode');\n\t\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tover = false;\n\t\t\t\t\t$(e.currentTarget).removeClass('drop-mode');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * drop handler\n\t\t\t *\n\t\t\t * @Param {Object} e\n\t\t\t */\n\t\t\tvar dropHandler = function(e)\n\t\t\t{\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\toverHandler(e);\n\n\t\t\t\tvar files = (e.dataTransfer) ? e.dataTransfer.files : null;\n\t\t\t\tif (files && files.length)\n\t\t\t\t{\n\t\t\t\t\tdefer.notify(files);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\t// set events\n\t\t\tfor (var i=0; i<area.length; i++)\n\t\t\t{\n\t\t\t\tarea[i].addEventListener('dragover', overHandler, false);\n\t\t\t\tarea[i].addEventListener('dragleave', overHandler, false);\n\t\t\t\tarea[i].addEventListener('drop', dropHandler, false);\n\t\t\t}\n\n\t\t\treturn defer.promise();\n\t\t};\n\n\t\t/**\n\t\t * done event\n\t\t *\n\t\t * @Param {FileList} files\n\t\t */\n\t\tvar done = function(files)\n\t\t{\n\t\t\tif (app.uploader.uploading)\n\t\t\t{\n\t\t\t\talert(app.lang('error_add_upload'));\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// play upload\n\t\t\tapp.uploader.play(files || []);\n\t\t};\n\n\t\t// return\n\t\treturn {\n\t\t\tname : name,\n\t\t\tinit : function(parent)\n\t\t\t{\n\t\t\t\tapp = parent;\n\n\t\t\t\t// push area elements\n\t\t\t\tareaElements.push(app.queue.$queue.parent().get(0));\n\t\t\t\texternalAreaElements.each(function(){\n\t\t\t\t\tareaElements.push(this);\n\t\t\t\t});\n\n\t\t\t\t// init event\n\t\t\t\tif (areaElements.length)\n\t\t\t\t{\n\t\t\t\t\tvar dnd = fileDragAndDrop(areaElements);\n\t\t\t\t\tif (dnd && dnd.progress)\n\t\t\t\t\t{\n\t\t\t\t\t\tdnd.progress(done);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})();",";(function(){\n\tRGUploader.prototype.plugins.preview = function()\n\t{\n\t\tvar name = 'preview';\n\t\tvar app = null;\n\t\tvar $preview = null;\n\t\tvar classNameNotImage = 'not-image';\n\t\tvar width = 150;\n\n\t\t/**\n\t\t * create preview\n\t\t */\n\t\tvar createPreview = function()\n\t\t{\n\t\t\tvar str = '<div class=\"col preview\"><figure></figure></div>';\n\t\t\t$preview = $(str);\n\n\t\t\t// set width\n\t\t\t$preview.width(width);\n\n\t\t\t// append element\n\t\t\tapp.$container.find('[data-comp=queue]').prepend($preview);\n\n\t\t\t// update\n\t\t\tupdatePreview();\n\t\t};\n\n\t\t/**\n\t\t * update preview\n\t\t *\n\t\t * @Param {String} src\n\t\t */\n\t\tvar updatePreview = function(src)\n\t\t{\n\t\t\tvar $figure = $preview.children('figure');\n\t\t\tif (src)\n\t\t\t{\n\t\t\t\t$figure\n\t\t\t\t\t.css('backgroundImage', 'url(\\'' + src + '\\')')\n\t\t\t\t\t.removeClass(classNameNotImage);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$figure.attr('style', '').addClass(classNameNotImage);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * visible preview\n\t\t *\n\t\t * @Param {Boolean} src\n\t\t */\n\t\tvar visiblePreview = function(sw)\n\t\t{\n\t\t\tif (sw)\n\t\t\t{\n\t\t\t\t$preview.removeClass('hide');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$preview.addClass('hide');\n\t\t\t}\n\t\t};\n\n\n\t\t// return\n\t\treturn {\n\t\t\tname : name,\n\t\t\tinit : function(parent)\n\t\t\t{\n\t\t\t\tapp = parent;\n\t\t\t\twidth = parseInt(app.options.queue.height);\n\n\t\t\t\tcreatePreview();\n\t\t\t},\n\t\t\teventListener : function(type, value)\n\t\t\t{\n\t\t\t\tswitch(type) {\n\t\t\t\t\t// select queue\n\t\t\t\t\tcase 'queue.selectQueue':\n\t\t\t\t\t\tvar id = value.$selectElement.data('id');\n\t\t\t\t\t\tvar n = app.queue.findItem(id);\n\t\t\t\t\t\tvar file = app.queue.items.files[n];\n\t\t\t\t\t\tvar src = (value.$selectElement.hasClass('selected') && (file.type.split('/')[0] == 'image')) ? file.src : null;\n\t\t\t\t\t\tupdatePreview(src);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t// change queue style\n\t\t\t\t\tcase 'queue.changeStyle':\n\t\t\t\t\t\tvisiblePreview( (value.style == 'list') );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n})();",";(function(){\n\tRGUploader.prototype.plugins.sizeinfo = function()\n\t{\n\t\tvar name = 'sizeinfo';\n\t\tvar app = null;\n\t\tvar $body = null;\n\t\tvar wrapSelector = '.size-info';\n\t\tvar $current = null;\n\t\tvar $total = null;\n\t\tvar size = { current: 0, total: 0 };\n\n\t\t/**\n\t\t * update size\n\t\t *\n\t\t */\n\t\tvar update = function()\n\t\t{\n\t\t\t$current.text(app.util.bytesToSize(size.current));\n\t\t\t$total.text(app.util.bytesToSize(size.total));\n\t\t};\n\n\t\t/**\n\t\t * create element\n\t\t *\n\t\t */\n\t\tvar create = function()\n\t\t{\n\t\t\tvar str = '<p>Size : <em data-text=\"currentSize\"></em>/<em data-text=\"totalSize\"></em></p>';\n\t\t\t$body.append(str);\n\t\t\t$current = $body.find('[data-text=currentSize]');\n\t\t\t$total = $body.find('[data-text=totalSize]');\n\t\t}\n\n\t\treturn {\n\t\t\tname : name,\n\t\t\tinit : function(parent)\n\t\t\t{\n\t\t\t\tapp = parent;\n\t\t\t\t$body = parent.$container.find(wrapSelector);\n\n\t\t\t\t// not found $body element\n\t\t\t\tif (!$body.length)\n\t\t\t\t{\n\t\t\t\t\tapp.plugin.error(name);\n\t\t\t\t}\n\n\t\t\t\t// create elements\n\t\t\t\tcreate();\n\n\t\t\t\t// set size\n\t\t\t\tsize.total = app.options.limitSizeTotal;\n\n\t\t\t\t// update size\n\t\t\t\tupdate();\n\t\t\t},\n\t\t\tupdate : update,\n\t\t\teventListener : function(type, value)\n\t\t\t{\n\t\t\t\tswitch(type) {\n\t\t\t\t\tcase 'queue.uploadComplete':\n\t\t\t\t\t\tsize.current += value.file.size;\n\t\t\t\t\t\tupdate(app.queue.getSize());\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'queue.removeQueue':\n\t\t\t\t\t\tsize.current = app.queue.getSize();\n\t\t\t\t\t\tupdate();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n})();",";(function() {\n\tRGUploader.prototype.plugins.thumbnail = function ()\n\t{\n\t\tvar name = 'Create thumnail image';\n\t\tvar app = null;\n\t\tvar option = {\n\n\t\t};\n\n\n\t\t// return\n\t\treturn {\n\t\t\tname : name,\n\t\t\tinit : function(parent)\n\t\t\t{\n\t\t\t\tapp = parent;\n\n\t\t\t\tlog(name);\n\t\t\t},\n\t\t\topen : function()\n\t\t\t{\n\n\t\t\t},\n\t\t\teventListener : function(type, value)\n\t\t\t{\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase '':\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})();"],"sourceRoot":"/source/"}