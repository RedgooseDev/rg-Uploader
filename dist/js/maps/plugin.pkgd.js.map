{"version":3,"sources":["changeQueueStyle.plugin.js","dnd.plugin.js","preview.plugin.js","sizeinfo.plugin.js","thumbnail.plugin.js"],"names":["ChangeQueueStyle","this","name","buttonsParams","title","iconName","default","$nav","$buttons","self","app","createButtons","$","each","k","o","$el","initButtonsEvent","append","children","on","e","hasClass","queue","changeStyle","data","changeActiveButton","removeClass","filter","addClass","init","parent","$container","style","eventListener","type","value","RGUploader","prototype","plugins","changeQueueStyle","DragAndDrop","areaElements","externalAreaElements","fileDragAndDrop","area","window","File","FileList","FileReader","Blob","length","defer","Deferred","over","overHandler","stopPropagation","preventDefault","currentTarget","dataTransfer","dropEffect","dropHandler","files","notify","i","addEventListener","promise","done","uploader","uploading","alert","lang","play","$uploadElement","push","$queue","get","dnd","progress","Preview","$preview","classNameNotImage","width","createPreview","str","find","prepend","updatePreview","src","$figure","css","attr","visiblePreview","sw","parseInt","options","height","id","$selectElement","n","findItem","file","items","split","preview","Sizeinfo","size","current","total","$body","wrapSelector","$current","$total","create","plugin","error","limitSizeTotal","update","text","util","bytesToSize","getSize","sizeinfo","Thumbnail","loadExternalFiles","head","document","getElementsByTagName","cssEl","createElement","scriptEl","rel","href","appendChild","createContainer","con","wrap","bg","figure","meta","btn_done","btn_close","initEvents","close","RESIZE_EVENT","resize","actMobile","pass","isMobile","marginLeft","marginTop","left","top","croppie","rebuildCroppie","actDesktop","option","$win","resizeInterval","clearTimeout","setTimeout","isResize","save","destroyCroppie","boundary","mobileSize","Croppie","bind","url","points","setZoom","zoom","destroy","result","output","then","res","uploadScript","post","image","getUniqueNumber","JSON","parse","state","message","response","format","quality","viewport","open","obj","assignOption","extend","thumbnail"],"mappings":"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","file":"plugin.pkgd.js","sourcesContent":[";(function() {\n\n\tfunction ChangeQueueStyle() {\n\n\t\tthis.name = 'Change queue style';\n\t\tthis.buttonsParams = [\n\t\t\t{ name : 'list', title : 'list style', iconName : 'menu', default : true },\n\t\t\t{ name : 'web', title : 'web style', iconName : 'view_list', default : false },\n\t\t\t{ name : 'album', title : 'album style', iconName : 'view_module', default : false }\n\t\t];\n\t\tthis.$nav = null;\n\t\tthis.$buttons = null;\n\n\t\tvar self = this;\n\t\tvar app = null;\n\n\n\t\t/**\n\t\t * create buttons\n\t\t */\n\t\tvar createButtons = function()\n\t\t{\n\t\t\t$.each(self.buttonsParams, function(k, o){\n\t\t\t\tvar $el = $('<button type=\"button\" class=\"style-' + o.name + '\" title=\"' + o.title + '\" data-style=\"' + o.name + '\">' +\n\t\t\t\t\t'<i class=\"material-icons\">' + o.iconName + '</i>' +\n\t\t\t\t\t'</button>');\n\t\t\t\tinitButtonsEvent($el);\n\t\t\t\tself.$nav.append($el);\n\t\t\t});\n\t\t\tself.$buttons = self.$nav.children('button');\n\t\t};\n\n\t\t/**\n\t\t * init buttons event\n\t\t *\n\t\t * @Param {Object} $el\n\t\t */\n\t\tvar initButtonsEvent = function($el)\n\t\t{\n\t\t\t$el.on('click', function(e){\n\t\t\t\tif ($(this).hasClass('on')) return false;\n\t\t\t\tapp.queue.changeStyle($(this).data('style'));\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * change active button\n\t\t */\n\t\tvar changeActiveButton = function(name)\n\t\t{\n\t\t\t// change style\n\t\t\tself.$buttons.removeClass('on').filter('.style-' + name).addClass('on');\n\t\t};\n\n\n\t\t/**\n\t\t * init\n\t\t *\n\t\t * @Param {Object} parent\n\t\t */\n\t\tthis.init = function(parent)\n\t\t{\n\t\t\tapp = parent;\n\n\t\t\t// append comp\n\t\t\tself.$nav = $('<nav data-element=\"selectQueueStyle\"></nav>');\n\t\t\tapp.$container.children('header').append(self.$nav);\n\n\t\t\t// create buttons\n\t\t\tcreateButtons();\n\n\t\t\t// set active button\n\t\t\tchangeActiveButton(app.queue.style);\n\n\t\t};\n\n\t\t/**\n\t\t * event listener\n\t\t *\n\t\t * @Param {String} type\n\t\t * @Param {*} value\n\t\t */\n\t\tthis.eventListener = function(type, value)\n\t\t{\n\t\t\tswitch (type) {\n\t\t\t\t// change style\n\t\t\t\tcase 'queue.changeStyle':\n\t\t\t\t\tchangeActiveButton(value.style);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tRGUploader.prototype.plugins.changeQueueStyle = new ChangeQueueStyle();\n\n})();",";(function(){\n\n\tfunction DragAndDrop() {\n\n\t\tthis.name = 'Drag and drop upload';\n\t\tthis.areaElements = [];\n\n\t\tvar self = this;\n\t\tvar app = null;\n\t\tvar externalAreaElements = $('.rg-external-dropzone');\n\n\n\t\t/**\n\t\t * init file drag and drop event\n\t\t *\n\t\t * @Param {Array} area\n\t\t * @Return {Object}\n\t\t */\n\t\tvar fileDragAndDrop = function(area)\n\t\t{\n\t\t\tif (!window.File || !window.FileList || !window.FileReader || !window.Blob) return false;\n\t\t\tif (!area.length) return false;\n\n\t\t\tvar defer = $.Deferred();\n\t\t\tvar over = false;\n\n\t\t\t/**\n\t\t\t * dragover handler\n\t\t\t *\n\t\t\t * @Param {Object} e\n\t\t\t */\n\t\t\tvar overHandler = function(e)\n\t\t\t{\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif (e.type == 'dragover')\n\t\t\t\t{\n\t\t\t\t\tif (over) return false;\n\t\t\t\t\tover = true;\n\t\t\t\t\t$(e.currentTarget).addClass('drop-mode');\n\t\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tover = false;\n\t\t\t\t\t$(e.currentTarget).removeClass('drop-mode');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * drop handler\n\t\t\t *\n\t\t\t * @Param {Object} e\n\t\t\t */\n\t\t\tvar dropHandler = function(e)\n\t\t\t{\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\toverHandler(e);\n\n\t\t\t\tvar files = (e.dataTransfer) ? e.dataTransfer.files : null;\n\t\t\t\tif (files && files.length)\n\t\t\t\t{\n\t\t\t\t\tdefer.notify(files);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\t// set events\n\t\t\tfor (var i=0; i<area.length; i++)\n\t\t\t{\n\t\t\t\tarea[i].addEventListener('dragover', overHandler, false);\n\t\t\t\tarea[i].addEventListener('dragleave', overHandler, false);\n\t\t\t\tarea[i].addEventListener('drop', dropHandler, false);\n\t\t\t}\n\n\t\t\treturn defer.promise();\n\t\t};\n\n\t\t/**\n\t\t * done event\n\t\t *\n\t\t * @Param {FileList} files\n\t\t */\n\t\tvar done = function(files)\n\t\t{\n\t\t\tif (app.uploader.uploading)\n\t\t\t{\n\t\t\t\talert(app.lang('error_add_upload'));\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// play upload\n\t\t\tapp.uploader.play(app.uploader.$uploadElement, (files || []));\n\t\t};\n\n\n\t\t/**\n\t\t * init\n\t\t *\n\t\t * @Param {Object} parent\n\t\t */\n\t\tthis.init = function(parent)\n\t\t{\n\t\t\tapp = parent;\n\n\t\t\t// push area elements\n\t\t\tthis.areaElements.push(app.queue.$queue.parent().get(0));\n\t\t\texternalAreaElements.each(function(){\n\t\t\t\tself.areaElements.push(this);\n\t\t\t});\n\n\t\t\t// init event\n\t\t\tif (this.areaElements.length)\n\t\t\t{\n\t\t\t\tvar dnd = fileDragAndDrop(this.areaElements);\n\t\t\t\tif (dnd && dnd.progress)\n\t\t\t\t{\n\t\t\t\t\tdnd.progress(done);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\tRGUploader.prototype.plugins.dnd = new DragAndDrop();\n\n})();",";(function(){\n\tfunction Preview() {\n\n\t\tthis.name = 'Preview';\n\t\tthis.$preview = null;\n\n\t\tvar self = this;\n\t\tvar app = null;\n\t\tvar classNameNotImage = 'not-image';\n\t\tvar width = 150;\n\n\n\t\t/**\n\t\t * create preview\n\t\t */\n\t\tvar createPreview = function()\n\t\t{\n\t\t\tvar str = '<div class=\"col preview\"><figure></figure></div>';\n\t\t\tself.$preview = $(str);\n\n\t\t\t// set width\n\t\t\tself.$preview.width(width);\n\n\t\t\t// append element\n\t\t\tapp.$container.find('[data-comp=queue]').prepend(self.$preview);\n\n\t\t\t// update\n\t\t\tupdatePreview();\n\t\t};\n\n\t\t/**\n\t\t * update preview\n\t\t *\n\t\t * @Param {String} src\n\t\t */\n\t\tvar updatePreview = function(src)\n\t\t{\n\t\t\tvar $figure = self.$preview.children('figure');\n\t\t\tif (src)\n\t\t\t{\n\t\t\t\t$figure\n\t\t\t\t\t.css('backgroundImage', 'url(\\'' + src + '\\')')\n\t\t\t\t\t.removeClass(classNameNotImage);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$figure.attr('style', '').addClass(classNameNotImage);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * visible preview\n\t\t *\n\t\t * @Param {Boolean} src\n\t\t */\n\t\tvar visiblePreview = function(sw)\n\t\t{\n\t\t\tif (sw)\n\t\t\t{\n\t\t\t\tself.$preview.removeClass('hide');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tself.$preview.addClass('hide');\n\t\t\t}\n\t\t};\n\n\n\t\t/**\n\t\t * init\n\t\t *\n\t\t * @Param {Object} parent\n\t\t */\n\t\tthis.init = function(parent)\n\t\t{\n\t\t\tapp = parent;\n\t\t\twidth = parseInt(app.options.queue.height);\n\n\t\t\tcreatePreview();\n\t\t};\n\n\t\t/**\n\t\t * event listener\n\t\t *\n\t\t * @Param {String} type\n\t\t * @Param {*} value\n\t\t */\n\t\tthis.eventListener = function(type, value)\n\t\t{\n\t\t\tswitch(type) {\n\t\t\t\t// select queue\n\t\t\t\tcase 'queue.selectQueue':\n\t\t\t\t\tvar id = value.$selectElement.data('id');\n\t\t\t\t\tvar n = app.queue.findItem(id);\n\t\t\t\t\tvar file = app.queue.items.files[n];\n\t\t\t\t\tvar src = (value.$selectElement.hasClass('selected') && (file.type.split('/')[0] == 'image')) ? file.src : null;\n\t\t\t\t\tupdatePreview(src);\n\t\t\t\t\tbreak;\n\n\t\t\t\t// change queue style\n\t\t\t\tcase 'queue.changeStyle':\n\t\t\t\t\tvisiblePreview( (value.style == 'list') );\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\n\tRGUploader.prototype.plugins.preview = new Preview();\n\n})();",";(function(){\n\n\tfunction Sizeinfo() {\n\n\t\tthis.name = 'Size info';\n\t\tthis.size = { current: 0, total: 0 };\n\n\t\tvar self = this;\n\t\tvar app = null;\n\t\tvar $body = null;\n\t\tvar wrapSelector = '.size-info';\n\t\tvar $current = null;\n\t\tvar $total = null;\n\n\n\t\t/**\n\t\t * create element\n\t\t *\n\t\t */\n\t\tvar create = function()\n\t\t{\n\t\t\tvar str = '<p>Size : <em data-text=\"currentSize\"></em>/<em data-text=\"totalSize\"></em></p>';\n\t\t\t$body.append(str);\n\t\t\t$current = $body.find('[data-text=currentSize]');\n\t\t\t$total = $body.find('[data-text=totalSize]');\n\t\t}\n\n\n\t\t/**\n\t\t * init\n\t\t *\n\t\t * @Param {Object} parent\n\t\t */\n\t\tthis.init = function(parent)\n\t\t{\n\t\t\tapp = parent;\n\t\t\t$body = parent.$container.find(wrapSelector);\n\n\t\t\t// not found $body element\n\t\t\tif (!$body.length)\n\t\t\t{\n\t\t\t\tapp.plugin.error(name);\n\t\t\t}\n\n\t\t\t// create elements\n\t\t\tcreate();\n\n\t\t\t// set size\n\t\t\tthis.size.total = app.options.limitSizeTotal;\n\n\t\t\t// update size\n\t\t\tthis.update();\n\t\t}\n\n\t\t/**\n\t\t * update\n\t\t */\n\t\tthis.update = function()\n\t\t{\n\t\t\t$current.text(app.util.bytesToSize(this.size.current));\n\t\t\t$total.text(app.util.bytesToSize(this.size.total));\n\t\t}\n\n\t\t/**\n\t\t * event listener\n\t\t *\n\t\t * @Param {String} type\n\t\t * @Param {*} value\n\t\t */\n\t\tthis.eventListener = function(type, value)\n\t\t{\n\t\t\tswitch(type) {\n\t\t\t\tcase 'queue.uploadComplete':\n\t\t\t\t\tself.size.current += value.file.size;\n\t\t\t\t\tself.update(app.queue.getSize());\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'queue.removeQueue':\n\t\t\t\t\tself.size.current = app.queue.getSize();\n\t\t\t\t\tself.update();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\n\tRGUploader.prototype.plugins.sizeinfo = new Sizeinfo();\n\n})();","// croppie : http://foliotek.github.io/Croppie/\n\n;(function() {\n\tfunction Thumbnail() {\n\n\t\tthis.name = 'Create thumnail image';\n\n\t\tvar self = this;\n\t\tvar app = null;\n\t\tvar RESIZE_EVENT = 'resize.rgUploader';\n\t\tvar isMobile = false;\n\t\tvar resizeInterval = null;\n\n\t\tthis.file = null;\n\t\tthis.croppie = null;\n\t\tthis.$el = {\n\t\t\tcon : null,\n\t\t\twrap : null,\n\t\t\tbg : null,\n\t\t\tfigure : null,\n\t\t\tmeta : null,\n\t\t\tbtn_close : null,\n\t\t\tbtn_done : null\n\t\t};\n\t\tthis.option = {\n\t\t\twidth : 640,\n\t\t\theight : 480,\n\t\t\tmobileSize : 640,\n\t\t\tuploadScript : './script/upload_base64.php',\n\t\t\toutput : {\n\t\t\t\ttype : 'canvas',\n\t\t\t\tquality : .3,\n\t\t\t\tformat : 'jpeg',\n\t\t\t\tsize : { width : 150, height : 150 }\n\t\t\t},\n\t\t\tcroppie : {\n\t\t\t\tboundary : { width: 640, height: 480-60 },\n\t\t\t\tviewport : { width: 150, height: 150, type: 'square' }\n\t\t\t}\n\t\t};\n\n\n\t\t/**\n\t\t * load external vendor files\n\t\t */\n\t\tfunction loadExternalFiles()\n\t\t{\n\t\t\tvar head = document.getElementsByTagName('head')[0];\n\t\t\tvar cssEl = document.createElement('link');\n\t\t\tvar scriptEl = document.createElement('script');\n\n\t\t\tcssEl.rel = 'stylesheet';\n\t\t\tcssEl.href = '../vendor/croppie/croppie.css';\n\t\t\tscriptEl.src = '../vendor/croppie/croppie.min.js';\n\n\t\t\thead.appendChild(cssEl);\n\t\t\thead.appendChild(scriptEl);\n\t\t}\n\n\t\t/**\n\t\t * create container\n\t\t */\n\t\tfunction createContainer()\n\t\t{\n\t\t\t// set elements\n\t\t\tself.$el.con = $('<div class=\"rg-plugin-thumbnail\">' +\n\t\t\t\t'<span class=\"bg\"></span>' +\n\t\t\t\t'<div class=\"wrap\">' +\n\t\t\t\t'<div class=\"img-wrap\"><figure></figure></div>' +\n\t\t\t\t'<div class=\"body\">' +\n\t\t\t\t'<div class=\"meta\"><p>message</p></div>' +\n\t\t\t\t'<nav>' +\n\t\t\t\t'<button type=\"button\" class=\"btn-done\"><i class=\"material-icons\">done</i></button>' +\n\t\t\t\t'<button type=\"button\" class=\"btn-close\"><i class=\"material-icons\">close</i></button>' +\n\t\t\t\t'</nav>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>');\n\t\t\tself.$el.wrap = self.$el.con.children('.wrap');\n\t\t\tself.$el.bg = self.$el.con.children('.bg');\n\t\t\tself.$el.figure = self.$el.con.find('.img-wrap figure');\n\t\t\tself.$el.meta = self.$el.con.find('.meta > p');\n\t\t\tself.$el.btn_done = self.$el.con.find('.btn-done');\n\t\t\tself.$el.btn_close = self.$el.con.find('.btn-close');\n\n\t\t\t// insert element\n\t\t\t$('body').append(self.$el.con);\n\t\t}\n\n\t\t/**\n\t\t * init events\n\t\t */\n\t\tfunction initEvents()\n\t\t{\n\t\t\t// close in background\n\t\t\tself.$el.bg.on('click', function(){\n\t\t\t\tself.close();\n\t\t\t});\n\n\t\t\t// close in close button\n\t\t\tself.$el.btn_close.on('click', function(){\n\t\t\t\tself.close();\n\t\t\t});\n\n\t\t\t// done\n\t\t\tself.$el.btn_done.on('click', done);\n\n\t\t\t// init resize event\n\t\t\t$(window).on(RESIZE_EVENT, resize);\n\t\t}\n\n\t\t/**\n\t\t * change mobile\n\t\t */\n\t\tfunction actMobile(pass)\n\t\t{\n\t\t\tif (!pass && isMobile) return false;\n\n\t\t\t// set isMobile\n\t\t\tisMobile = true;\n\n\t\t\t// change window size\n\t\t\tself.$el.wrap\n\t\t\t\t.width('100%').height('100%')\n\t\t\t\t.css({ marginLeft : 0, marginTop : 0, left: 0, top: 0 });\n\n\t\t\t// rebuild croppie\n\t\t\tif (self.croppie)\n\t\t\t{\n\t\t\t\trebuildCroppie(true);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * change desktop\n\t\t */\n\t\tfunction actDesktop(pass)\n\t\t{\n\t\t\tif (!pass && !isMobile) return false;\n\n\t\t\t// set isMobile\n\t\t\tisMobile = false;\n\n\t\t\t// change window size\n\t\t\tself.$el.wrap\n\t\t\t\t.width(self.option.width).height(self.option.height)\n\t\t\t\t.css({\n\t\t\t\t\tmarginLeft : (0 - self.option.width * 0.5) + 'px',\n\t\t\t\t\tmarginTop : (0 - self.option.height * 0.5) + 'px',\n\t\t\t\t\tleft: '50%',\n\t\t\t\t\ttop: '50%'\n\t\t\t\t});\n\n\t\t\t// rebuild croppie\n\t\t\tif (self.croppie)\n\t\t\t{\n\t\t\t\trebuildCroppie(true);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * resize event\n\t\t *\n\t\t * @Param {Object} e\n\t\t */\n\t\tfunction resize(e)\n\t\t{\n\t\t\tvar $win = $(window);\n\n\t\t\tif (!self.croppie)\n\t\t\t{\n\t\t\t\tclearTimeout(resizeInterval);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (resizeInterval)\n\t\t\t{\n\t\t\t\tclearTimeout(resizeInterval);\n\t\t\t}\n\n\t\t\tresizeInterval = setTimeout(function(){\n\t\t\t\t// 계속 모바일 사이즈상태일때 실행\n\t\t\t\tif (isMobile && ($win.width() < 640))\n\t\t\t\t{\n\t\t\t\t\tactMobile(true);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif ($win.width() < 640)\n\t\t\t\t{\n\t\t\t\t\tactMobile(true);\n\t\t\t\t}\n\t\t\t\telse if ($win.width() > 640)\n\t\t\t\t{\n\t\t\t\t\tactDesktop(true);\n\t\t\t\t}\n\t\t\t}, 300);\n\t\t}\n\n\t\t/**\n\t\t * rebuild croppie\n\t\t *\n\t\t * @Param {Boolean} isResize\n\t\t */\n\t\tfunction rebuildCroppie(isResize)\n\t\t{\n\t\t\t// save option\n\t\t\tvar save = (isResize) ? self.croppie.get() : {};\n\n\t\t\t// destroy croppie\n\t\t\tdestroyCroppie();\n\n\t\t\t// build croppie\n\t\t\tself.option.croppie.boundary = {\n\t\t\t\twidth : (self.option.mobileSize > $(window).width()) ? $(window).width() : self.option.width,\n\t\t\t\theight : ((self.option.mobileSize > $(window).width()) ? $(window).height() : self.option.height)-60\n\t\t\t};\n\t\t\tself.croppie = new Croppie(self.$el.figure.get(0), self.option.croppie);\n\n\t\t\t// bind croppie\n\t\t\tif (isResize)\n\t\t\t{\n\t\t\t\tself.croppie.bind({\n\t\t\t\t\turl : self.file.src,\n\t\t\t\t\tpoints : save.points\n\t\t\t\t});\n\t\t\t\tself.croppie.setZoom(save.zoom);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * destroy croppie\n\t\t */\n\t\tfunction destroyCroppie()\n\t\t{\n\t\t\tif (self.croppie)\n\t\t\t{\n\t\t\t\tself.croppie.destroy();\n\t\t\t\tself.croppie = null;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * done event\n\t\t *\n\t\t * @Param {Object} e\n\t\t */\n\t\tfunction done(e)\n\t\t{\n\t\t\t// result\n\t\t\tself.croppie.result(self.option.output).then(function(res){\n\t\t\t\t$('#result').append('<img src=\"' + res + '\" alt=\"\">');\n\n\t\t\t\tif (self.option.uploadScript)\n\t\t\t\t{\n\t\t\t\t\t$.post(\n\t\t\t\t\t\tself.option.uploadScript,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname : self.file.name,\n\t\t\t\t\t\t\timage : res,\n\t\t\t\t\t\t\tid : app.util.getUniqueNumber()\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction(res){\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tres = JSON.parse(res);\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\talert('parse error');\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (res.state == 'error')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\talert(res.message);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// import thumnail\n\t\t\t\t\t\t\tapp.queue.import([res.response]);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tapp.queue.import([{\n\t\t\t\t\t\tid : app.util.getUniqueNumber(),\n\t\t\t\t\t\tname : 'thumb-' + self.file.name,\n\t\t\t\t\t\tsrc : res,\n\t\t\t\t\t\ttype : 'image/' + self.option.output.format,\n\t\t\t\t\t\tsize : 0\n\t\t\t\t\t}]);\n\t\t\t\t}\n\n\t\t\t\t// close\n\t\t\t\tself.close();\n\t\t\t});\n\t\t}\n\n\n\t\t/**\n\t\t * init\n\t\t *\n\t\t * @Param {Object} parent\n\t\t */\n\t\tthis.init = function(parent)\n\t\t{\n\t\t\tapp = parent;\n\n\t\t\t// load files\n\t\t\tloadExternalFiles();\n\n\t\t\t// create container\n\t\t\tcreateContainer();\n\n\t\t\t// init events\n\t\t\tinitEvents();\n\t\t};\n\n\t\t/**\n\t\t * open window\n\t\t *\n\t\t * @Param {Object} obj\n\t\t */\n\t\tthis.open = function(obj)\n\t\t{\n\t\t\t// show window\n\t\t\tthis.$el.con.addClass('show');\n\t\t\t$('html').addClass('rg-popup');\n\n\t\t\t// set file value\n\t\t\tthis.file = obj;\n\n\t\t\t// act pc & mobile\n\t\t\tif ($(window).width() < this.option.mobileSize)\n\t\t\t{\n\t\t\t\tactMobile(true);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tactDesktop(true);\n\t\t\t}\n\n\t\t\t// rebuild croppie\n\t\t\trebuildCroppie();\n\t\t\t// bind image\n\t\t\tthis.croppie.bind({ url : this.file.src });\n\n\t\t\t// input state\n\t\t\tthis.$el.meta.text('output size: ' + this.option.output.size.width + '*' + this.option.output.size.height);\n\t\t};\n\n\t\t/**\n\t\t * close window\n\t\t */\n\t\tthis.close = function()\n\t\t{\n\t\t\tdestroyCroppie();\n\t\t\tthis.file = null;\n\t\t\tthis.$el.con.removeClass('show');\n\t\t\t$('html').removeClass('rg-popup');\n\t\t};\n\n\t\t/**\n\t\t * assignOption\n\t\t *\n\t\t * @Param {Object} obj\n\t\t */\n\t\tthis.assignOption = function(obj)\n\t\t{\n\t\t\tthis.option = $.extend({}, this.option, obj);\n\t\t}\n\t}\n\n\tRGUploader.prototype.plugins.thumbnail = new Thumbnail();\n\n})();"],"sourceRoot":"/source/"}