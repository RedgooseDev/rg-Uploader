{"version":3,"sources":["changeQueueStyle.plugin.js","dnd.plugin.js","preview.plugin.js","sizeinfo.plugin.js","thumbnail.plugin.js"],"names":["RGUploader","prototype","plugins","changeQueueStyle","name","app","$nav","$buttons","buttonsParams","title","iconName","default","createButtons","$","each","k","o","$el","initButtonsEvent","append","children","on","e","this","hasClass","queue","changeStyle","data","changeActiveButton","removeClass","filter","addClass","init","parent","$container","style","eventListener","type","value","dnd","areaElements","externalAreaElements","fileDragAndDrop","area","window","File","FileList","FileReader","Blob","length","defer","Deferred","over","overHandler","stopPropagation","preventDefault","currentTarget","dataTransfer","dropEffect","dropHandler","files","notify","i","addEventListener","promise","done","uploader","uploading","alert","lang","play","$uploadElement","push","$queue","get","progress","preview","$preview","classNameNotImage","width","createPreview","str","find","prepend","updatePreview","src","$figure","css","attr","visiblePreview","sw","parseInt","options","height","id","$selectElement","n","findItem","file","items","split","sizeinfo","$body","wrapSelector","$current","$total","size","current","total","update","text","util","bytesToSize","create","plugin","error","limitSizeTotal","getSize","thumbnail","loadExternalFiles","head","document","getElementsByTagName","cssEl","createElement","scriptEl","rel","href","appendChild","createContainer","con","wrap","bg","figure","meta","btn_done","btn_close","initEvents","close","RESIZE_EVENT","resize","actMobile","pass","isMobile","marginLeft","marginTop","left","top","croppie","rebuildCroppie","actDesktop","option","$win","resizeInterval","clearTimeout","setTimeout","isResize","save","destroyCroppie","boundary","mobileSize","Croppie","bind","url","points","setZoom","zoom","destroy","open","obj","output","result","then","res","uploadScript","post","image","getUniqueNumber","JSON","parse","state","message","response","format","quality","viewport"],"mappings":"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","file":"plugin.pkgd.js","sourcesContent":[";(function() {\n\tRGUploader.prototype.plugins.changeQueueStyle = function ()\n\t{\n\t\tvar name = 'Change queue style';\n\t\tvar app = null;\n\t\tvar $nav = null;\n\t\tvar $buttons = null;\n\t\tvar buttonsParams = [\n\t\t\t{ name : 'list', title : 'list style', iconName : 'menu', default : true },\n\t\t\t{ name : 'web', title : 'web style', iconName : 'view_list', default : false },\n\t\t\t{ name : 'album', title : 'album style', iconName : 'view_module', default : false }\n\t\t];\n\n\n\t\t/**\n\t\t * create buttons\n\t\t */\n\t\tvar createButtons = function()\n\t\t{\n\t\t\t$.each(buttonsParams, function(k, o){\n\t\t\t\tvar $el = $('<button type=\"button\" class=\"style-' + o.name + '\" title=\"' + o.title + '\" data-style=\"' + o.name + '\">' +\n\t\t\t\t\t'<i class=\"material-icons\">' + o.iconName + '</i>' +\n\t\t\t\t\t'</button>');\n\t\t\t\tinitButtonsEvent($el);\n\t\t\t\t$nav.append($el);\n\t\t\t});\n\t\t\t$buttons = $nav.children('button');\n\t\t};\n\n\t\t/**\n\t\t * init buttons event\n\t\t *\n\t\t * @Param {Object} $el\n\t\t */\n\t\tvar initButtonsEvent = function($el)\n\t\t{\n\t\t\t$el.on('click', function(e){\n\t\t\t\tif ($(this).hasClass('on')) return false;\n\t\t\t\tapp.queue.changeStyle($(this).data('style'));\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * change active button\n\t\t */\n\t\tvar changeActiveButton = function(name)\n\t\t{\n\t\t\t// change style\n\t\t\t$buttons.removeClass('on').filter('.style-' + name).addClass('on');\n\t\t};\n\n\n\t\t// return\n\t\treturn {\n\t\t\tname : name,\n\t\t\tinit : function(parent)\n\t\t\t{\n\t\t\t\tapp = parent;\n\n\t\t\t\t// append comp\n\t\t\t\t$nav = $('<nav data-element=\"selectQueueStyle\"></nav>');\n\t\t\t\tapp.$container.children('header').append($nav);\n\n\t\t\t\t// create buttons\n\t\t\t\tcreateButtons();\n\n\t\t\t\t// set active button\n\t\t\t\tchangeActiveButton(app.queue.style);\n\n\t\t\t},\n\t\t\teventListener : function(type, value)\n\t\t\t{\n\t\t\t\tswitch (type) {\n\t\t\t\t\t// change style\n\t\t\t\t\tcase 'queue.changeStyle':\n\t\t\t\t\t\tchangeActiveButton(value.style);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})();",";(function() {\n\tRGUploader.prototype.plugins.dnd = function ()\n\t{\n\t\tvar name = 'Drag and Drop upload';\n\t\tvar app = null;\n\t\tvar areaElements = [];\n\t\tvar externalAreaElements = $('.rg-external-dropzone');\n\n\n\t\t/**\n\t\t * init file drag and drop event\n\t\t *\n\t\t * @Param {Array} area\n\t\t * @Return {Object}\n\t\t */\n\t\tvar fileDragAndDrop = function(area)\n\t\t{\n\t\t\tif (!window.File || !window.FileList || !window.FileReader || !window.Blob) return false;\n\t\t\tif (!area.length) return false;\n\n\t\t\tvar defer = $.Deferred();\n\t\t\tvar over = false;\n\n\t\t\t/**\n\t\t\t * dragover handler\n\t\t\t *\n\t\t\t * @Param {Object} e\n\t\t\t */\n\t\t\tvar overHandler = function(e)\n\t\t\t{\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif (e.type == 'dragover')\n\t\t\t\t{\n\t\t\t\t\tif (over) return false;\n\t\t\t\t\tover = true;\n\t\t\t\t\t$(e.currentTarget).addClass('drop-mode');\n\t\t\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tover = false;\n\t\t\t\t\t$(e.currentTarget).removeClass('drop-mode');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * drop handler\n\t\t\t *\n\t\t\t * @Param {Object} e\n\t\t\t */\n\t\t\tvar dropHandler = function(e)\n\t\t\t{\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\toverHandler(e);\n\n\t\t\t\tvar files = (e.dataTransfer) ? e.dataTransfer.files : null;\n\t\t\t\tif (files && files.length)\n\t\t\t\t{\n\t\t\t\t\tdefer.notify(files);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\t// set events\n\t\t\tfor (var i=0; i<area.length; i++)\n\t\t\t{\n\t\t\t\tarea[i].addEventListener('dragover', overHandler, false);\n\t\t\t\tarea[i].addEventListener('dragleave', overHandler, false);\n\t\t\t\tarea[i].addEventListener('drop', dropHandler, false);\n\t\t\t}\n\n\t\t\treturn defer.promise();\n\t\t};\n\n\t\t/**\n\t\t * done event\n\t\t *\n\t\t * @Param {FileList} files\n\t\t */\n\t\tvar done = function(files)\n\t\t{\n\t\t\tif (app.uploader.uploading)\n\t\t\t{\n\t\t\t\talert(app.lang('error_add_upload'));\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// play upload\n\t\t\tapp.uploader.play(app.uploader.$uploadElement, (files || []));\n\t\t};\n\n\t\t// return\n\t\treturn {\n\t\t\tname : name,\n\t\t\tinit : function(parent)\n\t\t\t{\n\t\t\t\tapp = parent;\n\n\t\t\t\t// push area elements\n\t\t\t\tareaElements.push(app.queue.$queue.parent().get(0));\n\t\t\t\texternalAreaElements.each(function(){\n\t\t\t\t\tareaElements.push(this);\n\t\t\t\t});\n\n\t\t\t\t// init event\n\t\t\t\tif (areaElements.length)\n\t\t\t\t{\n\t\t\t\t\tvar dnd = fileDragAndDrop(areaElements);\n\t\t\t\t\tif (dnd && dnd.progress)\n\t\t\t\t\t{\n\t\t\t\t\t\tdnd.progress(done);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})();",";(function(){\n\tRGUploader.prototype.plugins.preview = function()\n\t{\n\t\tvar name = 'preview';\n\t\tvar app = null;\n\t\tvar $preview = null;\n\t\tvar classNameNotImage = 'not-image';\n\t\tvar width = 150;\n\n\t\t/**\n\t\t * create preview\n\t\t */\n\t\tvar createPreview = function()\n\t\t{\n\t\t\tvar str = '<div class=\"col preview\"><figure></figure></div>';\n\t\t\t$preview = $(str);\n\n\t\t\t// set width\n\t\t\t$preview.width(width);\n\n\t\t\t// append element\n\t\t\tapp.$container.find('[data-comp=queue]').prepend($preview);\n\n\t\t\t// update\n\t\t\tupdatePreview();\n\t\t};\n\n\t\t/**\n\t\t * update preview\n\t\t *\n\t\t * @Param {String} src\n\t\t */\n\t\tvar updatePreview = function(src)\n\t\t{\n\t\t\tvar $figure = $preview.children('figure');\n\t\t\tif (src)\n\t\t\t{\n\t\t\t\t$figure\n\t\t\t\t\t.css('backgroundImage', 'url(\\'' + src + '\\')')\n\t\t\t\t\t.removeClass(classNameNotImage);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$figure.attr('style', '').addClass(classNameNotImage);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * visible preview\n\t\t *\n\t\t * @Param {Boolean} src\n\t\t */\n\t\tvar visiblePreview = function(sw)\n\t\t{\n\t\t\tif (sw)\n\t\t\t{\n\t\t\t\t$preview.removeClass('hide');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$preview.addClass('hide');\n\t\t\t}\n\t\t};\n\n\n\t\t// return\n\t\treturn {\n\t\t\tname : name,\n\t\t\tinit : function(parent)\n\t\t\t{\n\t\t\t\tapp = parent;\n\t\t\t\twidth = parseInt(app.options.queue.height);\n\n\t\t\t\tcreatePreview();\n\t\t\t},\n\t\t\teventListener : function(type, value)\n\t\t\t{\n\t\t\t\tswitch(type) {\n\t\t\t\t\t// select queue\n\t\t\t\t\tcase 'queue.selectQueue':\n\t\t\t\t\t\tvar id = value.$selectElement.data('id');\n\t\t\t\t\t\tvar n = app.queue.findItem(id);\n\t\t\t\t\t\tvar file = app.queue.items.files[n];\n\t\t\t\t\t\tvar src = (value.$selectElement.hasClass('selected') && (file.type.split('/')[0] == 'image')) ? file.src : null;\n\t\t\t\t\t\tupdatePreview(src);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t// change queue style\n\t\t\t\t\tcase 'queue.changeStyle':\n\t\t\t\t\t\tvisiblePreview( (value.style == 'list') );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n})();",";(function(){\n\tRGUploader.prototype.plugins.sizeinfo = function()\n\t{\n\t\tvar name = 'sizeinfo';\n\t\tvar app = null;\n\t\tvar $body = null;\n\t\tvar wrapSelector = '.size-info';\n\t\tvar $current = null;\n\t\tvar $total = null;\n\t\tvar size = { current: 0, total: 0 };\n\n\t\t/**\n\t\t * update size\n\t\t *\n\t\t */\n\t\tvar update = function()\n\t\t{\n\t\t\t$current.text(app.util.bytesToSize(size.current));\n\t\t\t$total.text(app.util.bytesToSize(size.total));\n\t\t};\n\n\t\t/**\n\t\t * create element\n\t\t *\n\t\t */\n\t\tvar create = function()\n\t\t{\n\t\t\tvar str = '<p>Size : <em data-text=\"currentSize\"></em>/<em data-text=\"totalSize\"></em></p>';\n\t\t\t$body.append(str);\n\t\t\t$current = $body.find('[data-text=currentSize]');\n\t\t\t$total = $body.find('[data-text=totalSize]');\n\t\t}\n\n\t\treturn {\n\t\t\tname : name,\n\t\t\tinit : function(parent)\n\t\t\t{\n\t\t\t\tapp = parent;\n\t\t\t\t$body = parent.$container.find(wrapSelector);\n\n\t\t\t\t// not found $body element\n\t\t\t\tif (!$body.length)\n\t\t\t\t{\n\t\t\t\t\tapp.plugin.error(name);\n\t\t\t\t}\n\n\t\t\t\t// create elements\n\t\t\t\tcreate();\n\n\t\t\t\t// set size\n\t\t\t\tsize.total = app.options.limitSizeTotal;\n\n\t\t\t\t// update size\n\t\t\t\tupdate();\n\t\t\t},\n\t\t\tupdate : update,\n\t\t\teventListener : function(type, value)\n\t\t\t{\n\t\t\t\tswitch(type) {\n\t\t\t\t\tcase 'queue.uploadComplete':\n\t\t\t\t\t\tsize.current += value.file.size;\n\t\t\t\t\t\tupdate(app.queue.getSize());\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'queue.removeQueue':\n\t\t\t\t\t\tsize.current = app.queue.getSize();\n\t\t\t\t\t\tupdate();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n})();","// croppie : http://foliotek.github.io/Croppie/\n\n;(function() {\n\tRGUploader.prototype.plugins.thumbnail = function ()\n\t{\n\t\tvar name = 'Create thumnail image';\n\t\tvar app = null;\n\t\tvar $el = {\n\t\t\tcon : null,\n\t\t\twrap : null,\n\t\t\tbg : null,\n\t\t\tfigure : null,\n\t\t\tmeta : null,\n\t\t\tbtn_close : null,\n\t\t\tbtn_done : null\n\t\t};\n\t\tvar option = {\n\t\t\twidth : 640,\n\t\t\theight : 480,\n\t\t\tmobileSize : 640,\n\t\t\tuploadScript : './script/upload_base64.php',\n\t\t\toutput : {\n\t\t\t\ttype : 'canvas',\n\t\t\t\tquality : .3,\n\t\t\t\tformat : 'jpeg',\n\t\t\t\tsize : { width : 150, height : 150 }\n\t\t\t}\n\t\t};\n\t\tvar RESIZE_EVENT = 'resize.rgUploader';\n\t\tvar isMobile = false;\n\t\tvar resizeInterval = null;\n\t\tvar croppie = null;\n\t\tvar file = null;\n\n\t\toption.croppie = {\n\t\t\tboundary : { width: option.width, height: option.height-60 },\n\t\t\tviewport : { width: 150, height: 150, type: 'square' }\n\t\t};\n\n\t\t/**\n\t\t * load external vendor files\n\t\t */\n\t\tfunction loadExternalFiles()\n\t\t{\n\t\t\tvar head = document.getElementsByTagName('head')[0];\n\t\t\tvar cssEl = document.createElement('link');\n\t\t\tvar scriptEl = document.createElement('script');\n\n\t\t\tcssEl.rel = 'stylesheet';\n\t\t\tcssEl.href = '../vendor/croppie/croppie.css';\n\t\t\tscriptEl.src = '../vendor/croppie/croppie.min.js';\n\n\t\t\thead.appendChild(cssEl);\n\t\t\thead.appendChild(scriptEl);\n\t\t}\n\n\t\t/**\n\t\t * create container\n\t\t */\n\t\tfunction createContainer()\n\t\t{\n\t\t\t// set elements\n\t\t\t$el.con = $('<div class=\"rg-plugin-thumbnail\">' +\n\t\t\t\t'<span class=\"bg\"></span>' +\n\t\t\t\t'<div class=\"wrap\">' +\n\t\t\t\t\t'<div class=\"img-wrap\"><figure></figure></div>' +\n\t\t\t\t\t'<div class=\"body\">' +\n\t\t\t\t\t\t'<div class=\"meta\"><p>message</p></div>' +\n\t\t\t\t\t\t'<nav>' +\n\t\t\t\t\t\t\t'<button type=\"button\" class=\"btn-done\"><i class=\"material-icons\">done</i></button>' +\n\t\t\t\t\t\t\t'<button type=\"button\" class=\"btn-close\"><i class=\"material-icons\">close</i></button>' +\n\t\t\t\t\t\t'</nav>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>');\n\t\t\t$el.wrap = $el.con.children('.wrap');\n\t\t\t$el.bg = $el.con.children('.bg');\n\t\t\t$el.figure = $el.con.find('.img-wrap figure');\n\t\t\t$el.meta = $el.con.find('.meta > p');\n\t\t\t$el.btn_done = $el.con.find('.btn-done');\n\t\t\t$el.btn_close = $el.con.find('.btn-close');\n\n\t\t\t// insert element\n\t\t\t$('body').append($el.con);\n\t\t}\n\n\t\t/**\n\t\t * init events\n\t\t */\n\t\tfunction initEvents()\n\t\t{\n\t\t\t// close in background\n\t\t\t$el.bg.on('click', close);\n\n\t\t\t// close in close button\n\t\t\t$el.btn_close.on('click', close);\n\n\t\t\t// done\n\t\t\t$el.btn_done.on('click', done);\n\n\t\t\t// init resize event\n\t\t\t$(window).on(RESIZE_EVENT, resize);\n\t\t}\n\n\t\t/**\n\t\t * change mobile\n\t\t */\n\t\tfunction actMobile(pass)\n\t\t{\n\t\t\tif (!pass && isMobile) return false;\n\n\t\t\t// set isMobile\n\t\t\tisMobile = true;\n\n\t\t\t// change window size\n\t\t\t$el.wrap\n\t\t\t\t.width('100%').height('100%')\n\t\t\t\t.css({ marginLeft : 0, marginTop : 0, left: 0, top: 0 });\n\n\t\t\t// rebuild croppie\n\t\t\tif (croppie)\n\t\t\t{\n\t\t\t\trebuildCroppie(true);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * change desktop\n\t\t */\n\t\tfunction actDesktop(pass)\n\t\t{\n\t\t\tif (!pass && !isMobile) return false;\n\n\t\t\t// set isMobile\n\t\t\tisMobile = false;\n\n\t\t\t// change window size\n\t\t\t$el.wrap\n\t\t\t\t.width(option.width).height(option.height)\n\t\t\t\t.css({\n\t\t\t\t\tmarginLeft : (0 - option.width * 0.5) + 'px',\n\t\t\t\t\tmarginTop : (0 - option.height * 0.5) + 'px',\n\t\t\t\t\tleft: '50%',\n\t\t\t\t\ttop: '50%'\n\t\t\t\t});\n\n\t\t\t// rebuild croppie\n\t\t\tif (croppie)\n\t\t\t{\n\t\t\t\trebuildCroppie(true);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * resize event\n\t\t *\n\t\t * @Param {Object} e\n\t\t */\n\t\tfunction resize(e)\n\t\t{\n\t\t\tvar $win = $(window);\n\n\t\t\tif (!croppie)\n\t\t\t{\n\t\t\t\tclearTimeout(resizeInterval);\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (resizeInterval)\n\t\t\t{\n\t\t\t\tclearTimeout(resizeInterval);\n\t\t\t}\n\n\t\t\tresizeInterval = setTimeout(function(){\n\t\t\t\t// 계속 모바일 사이즈상태일때 실행\n\t\t\t\tif (isMobile && ($win.width() < 640))\n\t\t\t\t{\n\t\t\t\t\tactMobile(true);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif ($win.width() < 640)\n\t\t\t\t{\n\t\t\t\t\tactMobile(true);\n\t\t\t\t}\n\t\t\t\telse if ($win.width() > 640)\n\t\t\t\t{\n\t\t\t\t\tactDesktop(true);\n\t\t\t\t}\n\t\t\t}, 300);\n\t\t}\n\n\t\t/**\n\t\t * rebuild croppie\n\t\t *\n\t\t * @Param {Boolean} isResize\n\t\t */\n\t\tfunction rebuildCroppie(isResize)\n\t\t{\n\t\t\t// save option\n\t\t\tvar save = (isResize) ? croppie.get() : {};\n\n\t\t\t// destroy croppie\n\t\t\tdestroyCroppie();\n\n\t\t\t// build croppie\n\t\t\toption.croppie.boundary = {\n\t\t\t\twidth : (option.mobileSize > $(window).width()) ? $(window).width() : option.width,\n\t\t\t\theight : ((option.mobileSize > $(window).width()) ? $(window).height() : option.height)-60\n\t\t\t};\n\t\t\tcroppie = new Croppie($el.figure.get(0), option.croppie);\n\n\t\t\t// bind croppie\n\t\t\tif (isResize)\n\t\t\t{\n\t\t\t\tcroppie.bind({\n\t\t\t\t\turl : file.src,\n\t\t\t\t\tpoints : save.points\n\t\t\t\t});\n\t\t\t\tcroppie.setZoom(save.zoom);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * destroy croppie\n\t\t */\n\t\tfunction destroyCroppie()\n\t\t{\n\t\t\tif (croppie)\n\t\t\t{\n\t\t\t\tcroppie.destroy();\n\t\t\t\tcroppie = null;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * open window\n\t\t *\n\t\t * @Param {Object} obj\n\t\t */\n\t\tfunction open(obj)\n\t\t{\n\t\t\t// show window\n\t\t\t$el.con.addClass('show');\n\n\t\t\t// set file value\n\t\t\tfile = obj;\n\n\t\t\t// act pc & mobile\n\t\t\tif ($(window).width() < option.mobileSize)\n\t\t\t{\n\t\t\t\tactMobile(true);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tactDesktop(true);\n\t\t\t}\n\n\t\t\t// rebuild croppie\n\t\t\trebuildCroppie();\n\t\t\t// bind image\n\t\t\tcroppie.bind({ url : file.src });\n\n\t\t\t// input state\n\t\t\t$el.meta.text('output size: ' + option.output.size.width + '*' + option.output.size.height);\n\t\t}\n\n\t\t/**\n\t\t * close window\n\t\t */\n\t\tfunction close()\n\t\t{\n\t\t\tdestroyCroppie();\n\t\t\tfile = null;\n\t\t\t$el.con.removeClass('show');\n\t\t}\n\n\t\t/**\n\t\t * done event\n\t\t *\n\t\t * @Param {Object} e\n\t\t */\n\t\tfunction done(e)\n\t\t{\n\t\t\t// result\n\t\t\tcroppie.result(option.output).then(function(res){\n\t\t\t\t$('#result').append('<img src=\"' + res + '\" alt=\"\">');\n\n\t\t\t\tif (option.uploadScript)\n\t\t\t\t{\n\t\t\t\t\t$.post(\n\t\t\t\t\t\toption.uploadScript,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname : file.name,\n\t\t\t\t\t\t\timage : res,\n\t\t\t\t\t\t\tid : app.util.getUniqueNumber()\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction(res){\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tres = JSON.parse(res);\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\talert('parse error');\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (res.state == 'error')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\talert(res.message);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// import thumnail\n\t\t\t\t\t\t\tapp.queue.import([res.response]);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tapp.queue.import([{\n\t\t\t\t\t\tid : app.util.getUniqueNumber(),\n\t\t\t\t\t\tname : 'thumb-' + file.name,\n\t\t\t\t\t\tsrc : res,\n\t\t\t\t\t\ttype : 'image/' + option.output.format,\n\t\t\t\t\t\tsize : 0\n\t\t\t\t\t}]);\n\t\t\t\t}\n\n\t\t\t\t// close\n\t\t\t\tclose();\n\t\t\t});\n\t\t}\n\n\n\t\t// return\n\t\treturn {\n\t\t\tname : name,\n\t\t\tinit : function(parent)\n\t\t\t{\n\t\t\t\tapp = parent;\n\n\t\t\t\t// load files\n\t\t\t\tloadExternalFiles();\n\n\t\t\t\t// create container\n\t\t\t\tcreateContainer();\n\n\t\t\t\t// init events\n\t\t\t\tinitEvents();\n\t\t\t},\n\t\t\topen : open,\n\t\t\tclose : close\n\t\t}\n\t}\n})();"],"sourceRoot":"/source/"}